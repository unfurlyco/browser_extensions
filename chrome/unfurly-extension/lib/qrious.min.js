!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.QRious=e()}(this,function(){"use strict";function t(t,e){var n;return"function"==typeof Object.create?n=Object.create(t):(s.prototype=t,n=new s,s.prototype=null),e&&i(!0,n,e),n}function e(e,n,s,r){var o=this;return"string"!=typeof e&&(r=s,s=n,n=e,e=null),"function"!=typeof n&&(r=s,s=n,n=function(){return o.apply(this,arguments)}),i(!1,n,o,r),n.prototype=t(o.prototype,s),n.prototype.constructor=n,n.class_=e||o.class_,n.super_=o,n}function i(t,e,i){for(var n,s,r=0,o=(i=a.call(arguments,2)).length;r<o;r++){s=i[r];for(n in s)t&&!u.call(s,n)||(e[n]=s[n])}return e}function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function s(){}var r=Object.prototype.hasOwnProperty,o=e,a=Array.prototype.slice,h={class_:"QRious",date:"2017-02-25",time:"18:22:48",version:"4.0.2"},f=o(function(t,e,i,n,s){this.data=t,this.size=e,this.level=i,this.version=n,this.mode=s},{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),c=o(function(t){this.mode=t,this.data=[]},{PAD0:236,PAD1:17}),l=o(function(t,e){f.call(this,t,e,1,0,c.NUMERIC)},{DATA_LENGTH:[10,12,14]}),u=r,g=o(function(t,e){f.call(this,t,e,1,0,c.ALPHANUMERIC)},{DATA_LENGTH:[9,11,13]}),d=o(function(t,e){this.canvas=t,this.qrious=e},{draw:function(t){var e,i,n=this.qrious,s=this.canvas,r=n.size,o=n.padding;(e=s.getContext("2d")).setFillStyle=e.fillStyle,e.setFillStyle(n.foreground),e.fillRect(0,0,r,r),e.setFillStyle(n.background),e.fillRect(o,o,r-2*o,r-2*o),e.setFillStyle(n.foreground);for(var a=0;a<t.length;a++)for(i=0;i<t.length;i++)t[a][i]&&e.fillRect(o+i,o+a,1,1)}}),p=o(function(t){this.qrious=t},{getCount:function(){return this.qrious.modules.length},getModuleAlignment:function(t,e){var i=this.qrious,n=i.padding||0,s=Math.floor((i.size-2*n)/this.getCount());return n+e*s},isDark:function(t,e){return this.qrious.modules[e][t]},draw:function(){if(this.qrious.modules){var t=this.qrious,e=this.getCount(),i=this.getModuleAlignment.bind(this),n=t.canvas.getContext("2d");n.beginPath();for(var s=0;s<e;s++)for(var r=0;r<e;r++)this.isDark(r,s)&&n.rect(i(s,r),i(s,r),1,1);n.fillStyle=t.foreground,n.fill()}}});return o(function(t){this.options={background:"white",canvas:null,data:null,element:null,foreground:"black",level:"L",mime:"image/png",padding:null,size:100,value:null},this._canvas=null,this._canvasRenderer=null,this.element=null,this.imageElement=null,this.qr=null,this.value=null,this._qr=null,this._dotsRenderer=null,this.update(t)},{get background(){return this.options.background},set background(t){return this.options.background=t,this.update()},get canvas(){return this._canvas},get canvasRenderer(){return this._canvasRenderer},get dots(){return this._dotsRenderer},get element(){return this.options.element},set element(t){if("string"==typeof t&&(t=document.getElementById(t)),"object"!=typeof t||null===t)throw new Error("QRious.element must be an HTMLElement or ID string");this.options.element=t,this._element=t,this.update()},get foreground(){return this.options.foreground},set foreground(t){return this.options.foreground=t,this.update()},get imageElement(){return this._imageElement},get level(){return this.options.level},set level(t){return this.options.level=t,this.update()},get mime(){return this.options.mime},set mime(t){return this.options.mime=t,this.update()},get padding(){return this.options.padding},set padding(t){return this.options.padding=t,this.update()},get size(){return this.options.size},set size(t){return this.options.size=t,this.update()},get value(){return this.options.value},set value(t){return this.options.value=t,this.update()},get _element(){return this.element},get _imageElement(){return this.imageElement},get _level(){return this.level},get _padding(){return this.padding},get _size(){return this.size},get _value(){return this.value},set _canvas(t){this._canvasRenderer=new d(t,this)},set _dots(t){this._dotsRenderer=new p(this)},set _element(t){this.element=t},set _imageElement(t){this.imageElement=t},set _level(t){this.level=t},set _padding(t){this.padding=t},set _size(t){this.size=t},set _value(t){this.value=t},toDataURL:function(t){return this.canvas.toDataURL(t||this.mime)},update:function(t){if(t&&"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);if(!this._canvas){var i=document.createElement("canvas");this._canvas=i,this._dots=i}return this._canvas.width=this._canvas.height=this.size,this.value=this.value,this._canvasRenderer.draw(),this}})}); 